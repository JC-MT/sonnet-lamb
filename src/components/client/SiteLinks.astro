---
const links = [
  { href: "/", label: "Home" },
  { href: "/about", label: "About" },
  { href: "/gallery", label: "Gallery" },
  { href: "/reels", label: "Reels" },
  { href: "/news", label: "News" },
  { href: "/contact", label: "Contact" }
];
---

<site-links>
  <ul
    data-menu
    data-active="false"
    class="transition-all md:transition-none duration-500 opacity-0 data-[active=true]:opacity-100 -z-20 md:z-0 data-[active=true]:fixed data-[active=true]:z-20 text-center pt-16 md:pt-0 absolute bg-white justify-center items-center left-0 top-0 h-screen w-screen md:h-full md:w-full md:opacity-100! md:relative! md:grid md:grid-flow-col"
  >
    {
      links.map(({ href, label }) => {
        return (
          <li>
            <a class="text-xl/[50px] md:text-sm px-2.5" href={href}>
              {label}
            </a>
          </li>
        );
      })
    }
  </ul>
  <figure
    id="menu-trigger"
    class="absolute right-4 top-4 md:hidden z-20 size-10 flex flex-col justify-between px-[9px] py-2.5 cursor-pointer"
  >
    <span
      data-animate
      data-active="false"
      class="data-[active=true]:-rotate-45 data-[active=true]:translate-y-[9px] bg-[#181818] w-full transition-all duration-300 h-0.5 rounded-xs"
    ></span>
    <span
      data-animate
      data-active="false"
      class="data-[active=true]:opacity-0 bg-[#181818] w-full transition-all duration-300 h-0.5 rounded-xs"
    ></span>
    <span
      data-animate
      data-active="false"
      class="data-[active=true]:rotate-45 data-[active=true]:translate-y-[-9px] bg-[#181818] w-full transition-all duration-300 h-0.5 rounded-xs"
    ></span>
  </figure>
</site-links>

<script>
  class SiteLinks extends HTMLElement {
    private activeMenu: boolean;
    private menu: HTMLElement | null;
    private menuTrigger: HTMLElement | null;
    private animateTargets: NodeListOf<HTMLElement>;

    constructor() {
      super();
      this.activeMenu = false;
    }

    connectedCallback() {
      this.menuTrigger = this.querySelector("#menu-trigger");
      this.menu = this.querySelector("[data-menu]");
      this.animateTargets = this.querySelectorAll("[data-animate]");

      if (this.menuTrigger) {
        this.menuTrigger.addEventListener("click", this.toggleMenu);
      }
    }

    toggleMenu = () => {
      if (!this.menu || !this.animateTargets.length) return;

      this.activeMenu = !this.activeMenu;
      this.menu.dataset.active = this.activeMenu ? "true" : "false";

      this.animateTargets.forEach((el: HTMLElement) => {
        el.dataset.active = this.activeMenu ? "true" : "false";
      });

      document.body.classList.toggle("overflow-y-hidden", this.activeMenu);
    };

    disconnectedCallback() {
      if (this.menuTrigger) {
        this.menuTrigger.removeEventListener("click", this.toggleMenu);
      }
    }
  }

  customElements.define("site-links", SiteLinks);
</script>
